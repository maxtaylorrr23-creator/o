<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Roads of Brighton</title>
    <style>
        :root {
            --vic-red: #d32f2f;
            --vic-blue: #1a237e;
            --card-bg: #ffffff;
            --app-bg: #f5f7f9;
        }

        body { font-family: -apple-system, sans-serif; margin: 0; background: var(--app-bg); overflow: hidden; }
        .screen { display: none; height: 100vh; width: 100vw; flex-direction: column; position: absolute; top: 0; left: 0; }
        .screen.active { display: flex; }

        /* PIN Screen Styling */
        .pin-container { text-align: center; padding-top: 60px; flex: 1; }
        .lock-icon { font-size: 50px; margin-bottom: 20px; }
        .pin-dots { display: flex; justify-content: center; gap: 15px; margin: 30px 0; }
        .pin-dots span { width: 15px; height: 15px; border: 2px solid #ccc; border-radius: 50%; }
        .pin-dots span.filled { background: #333; border-color: #333; }
        .keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 20px; margin-top: auto; padding-bottom: 40px; }
        .keypad button { height: 70px; border-radius: 12px; border: none; background: #fff; font-size: 24px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        /* Home Dashboard */
        header { padding: 40px 20px 10px; font-size: 28px; font-weight: bold; }
        .dash-cards { padding: 15px; display: flex; flex-direction: column; gap: 15px; }
        .stat-card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .licence-widget { background: linear-gradient(135deg, #2c3e50, #000000); color: white; padding: 25px; border-radius: 15px; margin-top: 20px; position: relative; }

        /* Licence Detail View */
        .licence-header { background: var(--vic-red); color: white; padding: 15px 20px; }
        .details-body { background: white; flex: 1; padding: 20px; }
        .profile-row { display: flex; gap: 15px; margin-bottom: 20px; }
        #display-photo { width: 110px; height: 130px; object-fit: cover; border-radius: 8px; border: 1px solid #ddd; }
        .qr-msg { font-size: 12px; color: #666; background: #f9f9f9; padding: 10px; border-radius: 8px; flex: 1; }
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .data-label { font-size: 12px; color: #888; margin-bottom: 2px; }
        .data-val { font-weight: bold; font-size: 16px; }
        .barcode-section { margin-top: 30px; text-align: center; border-top: 1px solid #eee; padding-top: 20px; }
        .mock-barcode { font-family: 'Libre Barcode 39', cursive; font-size: 50px; letter-spacing: 2px; }

        /* Admin Modal */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { background: white; width: 85%; max-height: 80vh; overflow-y: auto; padding: 25px; border-radius: 20px; }
        .modal-content input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .save-btn { background: #007aff; color: white; width: 100%; padding: 15px; border: none; border-radius: 10px; font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>

    <div id="pin-screen" class="screen active">
        <div class="pin-container">
            <div class="lock-icon">ðŸ”’</div>
            <h1>Enter PIN</h1>
            <p>Enter any 4-digit code to access your licence</p>
            <div class="pin-dots" id="dots-container">
                <span></span><span></span><span></span><span></span>
            </div>
        </div>
        <div class="keypad">
            <button onclick="keyPress('1')">1</button><button onclick="keyPress('2')">2</button><button onclick="keyPress('3')">3</button>
            <button onclick="keyPress('4')">4</button><button onclick="keyPress('5')">5</button><button onclick="keyPress('6')">6</button>
            <button onclick="keyPress('7')">7</button><button onclick="keyPress('8')">8</button><button onclick="keyPress('9')">9</button>
            <button></button><button onclick="keyPress('0')">0</button><button onclick="keyDelete()">âŒ«</button>
        </div>
    </div>

    <div id="home-screen" class="screen">
        <header onclick="adminCheck()">
            <span id="dash-greet">Hi Max</span>
        </header>
        <div class="dash-cards">
            <div class="stat-card">Demerit points balance</div>
            <div class="stat-card">Registered vehicles</div>
            <div class="licence-widget" onclick="navTo('detail-screen')">
                <strong>My licence</strong><br>
                <small>Tap to view licence</small>
            </div>
        </div>
    </div>

    <div id="detail-screen" class="screen">
        <div class="licence-header">
            <div style="font-weight: bold;">PROBATIONARY LICENCE</div>
            <div style="font-size: 13px;">Victoria Australia</div>
        </div>
        <div class="details-body">
            <div class="profile-row">
                <img id="display-photo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
                <div class="qr-msg">Presenting a QR code allows your driver licence information to be scanned</div>
            </div>
            <h2 id="disp-name" style="margin: 0; letter-spacing: 1px;">MAX T CAMERON</h2>
            
            <div class="info-grid">
                <div><div class="data-label">Permit number</div><div class="data-val" id="disp-pnum">060672930</div></div>
                <div><div class="data-label">Expiry</div><div class="data-val" id="disp-exp">30 Dec 2035</div></div>
                <div><div class="data-label">Permit type</div><div class="data-val" id="disp-ptype">Car P</div></div>
                <div><div class="data-label">Date of birth</div><div class="data-val" id="disp-dob">23 Feb 2007</div></div>
            </div>
            <div style="margin-top: 20px;">
                <div class="data-label">Address</div>
                <div class="data-val" id="disp-addr" style="font-size: 14px;">46A ELWOOD ST, BRIGHTON VIC 3186</div>
            </div>

            <div class="barcode-section">
                <div class="data-label">Victoria Police barcode</div>
                <div class="mock-barcode">||| |||| || | ||| || |||</div>
            </div>
        </div>
        <button onclick="navTo('home-screen')" style="padding: 15px; border: none; background: #eee;">Back</button>
    </div>

    <div id="admin-panel" class="modal">
        <div class="modal-content">
            <h3>Master Edit Panel</h3>
            <input type="text" id="in-name" placeholder="Full Name">
            <input type="text" id="in-dob" placeholder="DOB (e.g. 23 Feb 2007)">
            <input type="text" id="in-exp" placeholder="Expiry Date">
            <input type="text" id="in-addr" placeholder="Full Address">
            <input type="text" id="in-pnum" placeholder="Permit Number">
            <input type="text" id="in-ptype" placeholder="Permit Type (e.g. Car P)">
            <label>Profile Photo:</label>
            <input type="file" id="in-photo" accept="image/*">
            <button class="save-btn" onclick="applyEdits()">Apply Changes</button>
            <button onclick="document.getElementById('admin-panel').style.display='none'" style="width: 100%; background: none; border: none; margin-top: 10px; color: #666;">Cancel</button>
        </div>
    </div>

    <script>
        let inputPin = "";
        let taps = 0;

        // PIN Functionality
        function keyPress(n) {
            if (inputPin.length < 4) {
                inputPin += n;
                updateDots();
                if (inputPin.length === 4) {
                    setTimeout(() => navTo('home-screen'), 200);
                }
            }
        }

        function keyDelete() {
            inputPin = inputPin.slice(0, -1);
            updateDots();
        }

        function updateDots() {
            const dots = document.querySelectorAll('#dots-container span');
            dots.forEach((dot, i) => {
                dot.className = i < inputPin.length ? 'filled' : '';
            });
        }

        // Navigation
        function navTo(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        // Admin Trigger (5 Taps)
        function adminCheck() {
            taps++;
            if (taps === 5) {
                document.getElementById('admin-panel').style.display = 'flex';
                taps = 0;
            }
            setTimeout(() => taps = 0, 2000);
        }

        // Apply Edits
        function applyEdits() {
            const name = document.getElementById('in-name').value;
            if(name) {
                document.getElementById('disp-name').innerText = name.toUpperCase();
                document.getElementById('dash-greet').innerText = "Hi " + name.split(' ')[0];
            }
            
            const fields = ['dob', 'exp', 'addr', 'pnum', 'ptype'];
            fields.forEach(f => {
                const val = document.getElementById('in-' + f).value;
                if(val) document.getElementById('disp-' + f).innerText = val;
            });

            const photoFile = document.getElementById('in-photo').files[0];
            if(photoFile) {
                const reader = new FileReader();
                reader.onload = e => document.getElementById('display-photo').src = e.target.result;
                reader.readAsDataURL(photoFile);
            }

            document.getElementById('admin-panel').style.display = 'none';
        }
    </script>
</body>
</html>